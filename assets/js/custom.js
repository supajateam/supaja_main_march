// initialize
let targetPosition;
let scrollPosition;
let mainHeaderHeight;

//jQuery Start
$(document).ready(() => {

  let subHeader = $('#sub-header')

  targetPosition = subHeader.offset().top;

  if ($(window).width() < 992) {
    $('#scrollspy').attr('data-bs-root-margin', '0px 0px -634px');
  } else {
    $('#scrollspy').attr('data-bs-root-margin', '0px 0px -788px');
  }

  $(window).resize(() => {
    targetPosition = subHeader.offset().top;
  })

  mainHeaderHeight = 60;

  $(window).scroll(() => {
    scrollPosition = $(window).scrollTop()
    
    if (scrollPosition >= targetPosition - mainHeaderHeight) {
      subHeader.addClass('fixed-top top-60')
    } else {
      subHeader.removeClass('fixed-top top-60')
    }

    // bootstrap scrollspy
    if ($('#menu_tab1').hasClass('active')) {
      $('.sec1_tab_ui').css('background-color', 'white');
      $('.sec2_tab_ui').css('background-color', '#EBEBEB');
      $('.sec3_tab_ui').css('background-color', '#EBEBEB');

      $('#menu_tab1').css('color', '#1c3efe');
      $('#menu_tab2').css('color', 'black');
      $('#menu_tab3').css('color', 'black');
    }
    if ($('#menu_tab2').hasClass('active')) {
      $('.sec2_tab_ui').css('background-color', 'white');
      $('.sec1_tab_ui').css('background-color', '#EBEBEB');
      $('.sec3_tab_ui').css('background-color', '#EBEBEB');

      $('#menu_tab2').css('color', '#1c3efe');
      $('#menu_tab1').css('color', 'black');
      $('#menu_tab3').css('color', 'black');
    }
    if ($('#menu_tab3').hasClass('active')) {
      $('.sec3_tab_ui').css('background-color', 'white');
      $('.sec1_tab_ui').css('background-color', '#EBEBEB');
      $('.sec2_tab_ui').css('background-color', '#EBEBEB');

      $('#menu_tab3').css('color', '#1c3efe');
      $('#menu_tab2').css('color', 'black');
      $('#menu_tab1').css('color', 'black');
    }
  })

  // step trigger
  $('#step1-btn').on('click', () => {
    // slide control
    $('#step1-slide').addClass('step-active')
    $('#step2-slide').removeClass('step-active')
    $('#step3-slide').removeClass('step-active')

    //btn control
    $('#step1-btn').addClass('text-primary')
    $('#step2-btn').removeClass('text-primary')
    $('#step3-btn').removeClass('text-primary')
  })
  $('#step2-btn').on('click', () => {
    // slide control
    $('#step2-slide').addClass('step-active')
    $('#step1-slide').removeClass('step-active')
    $('#step3-slide').removeClass('step-active')

    //btn control
    $('#step2-btn').addClass('text-primary')
    $('#step1-btn').removeClass('text-primary')
    $('#step3-btn').removeClass('text-primary')
  })
  $('#step3-btn').on('click', () => {
    // slide control
    $('#step3-slide').addClass('step-active')
    $('#step1-slide').removeClass('step-active')
    $('#step2-slide').removeClass('step-active')

    //btn control
    $('#step3-btn').addClass('text-primary')
    $('#step1-btn').removeClass('text-primary')
    $('#step2-btn').removeClass('text-primary')
  })

})
